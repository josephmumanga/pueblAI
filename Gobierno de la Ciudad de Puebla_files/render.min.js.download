!function(){"use strict";
/**
   * @package   DPAttachments
   * @copyright Copyright (C) 2018 Digital Peak GmbH. <https://www.digital-peak.com>
   * @license   https://www.gnu.org/licenses/gpl-3.0.html GNU/GPL
   */var t=null;document.addEventListener("DOMContentLoaded",(function(){function e(e){var n=function(e){(t=new tingle.modal({footer:!1,stickyFooter:!1,closeMethods:["overlay","button","escape"],cssClass:["dp-attachment-modal"],closeLabel:Joomla.JText._("TMPL_DPSTRAP_CLOSE","Close"),onClose:function(){t.destroy()}})).setContent('<iframe class="dp-attachment-modal__content" src="'+e+'"></iframe>'),t.open()};if("undefined"==typeof tingle||!tingle){var a=document.createElement("script");a.type="text/javascript",a.src=Joomla.getOptions("system.paths").root+"/media/com_dpattachments/js/vendor/tingle/tingle.min.js",a.addEventListener("load",(function(){return n(e)})),document.head.appendChild(a);var o=document.createElement("link");return o.rel="stylesheet",o.href=Joomla.getOptions("system.paths").root+"/media/com_dpattachments/css/vendor/tingle/tingle.min.css",document.head.appendChild(o),!1}n(e)}function n(t,e,n,a){Array.from(document.querySelectorAll(t)).forEach((function(t){t.addEventListener(e,(function(t){return t.target.matches(n)?a(t):null}))}))}window.document.addEventListener("dpattachmentSaved",(function(e){if(t)if("attachment.cancel"!==e.detail){var n=document.querySelector(".dp-attachment-modal__content");n&&n.addEventListener("load",(function(){return setTimeout((function(){return location.reload()}),2e3)}))}else t.close()})),n(".com-dpattachments-layout-attachments","click",".dp-button-edit",(function(t){return t.preventDefault(),e(t.target.href),!1})),n(".com-dpattachments-layout-attachments","click",".dp-button-trash",(function(t){return t.preventDefault(),fetch(t.target.href).then((function(e){e.ok&&t.target.closest(".dp-attachment").remove()})),!1})),n(".com-dpattachments-layout-attachments","click",".dp-attachment__link",(function(t){return t.preventDefault(),e(t.target.getAttribute("href")),!1}))}))}();